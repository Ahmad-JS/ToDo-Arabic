<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>قائمة المهام</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="./index.css" />
</head>
<body>
  <div style="direction: rtl;">
    <div style="display:flex; justify-content:center;align-items: center; ">
      <div class="tasks-table">
                      <div class="tasks-header">
                          <h1 style="display: inline;">مهامي</h1>
                          <button id="add-btn" class="circular add-btn" title="إضافة مهمة">
                              <span class="material-symbols-outlined">
                                add
                              </span>
                          </button>
                      </div>

        <div id="tasks" style="padding:10px;">
<!--  -->
          <div id="task" class="task">
            <div style="width: 60%; background-color: #fff;">
            <h3> قراءة كتاب</h3>
            
        <div>
          <span class="material-symbols-outlined">
            calendar_month
            </span>
            <span>
              10/10/2030
            </span>

          </div>
          </div>

        <div style="display: flex; justify-content:space-between; align-items: center;width: 30%; color: #fff;">
          <button class="circular" style="background-color: red;">
            <span class="material-symbols-outlined">
              delete
              </span>
          </button>
          <button class="circular" style="background-color: green;">
            <span class="material-symbols-outlined">
              done
              </span>
          </button>
          <button class="circular" style="background-color: blue;">
            <span class="material-symbols-outlined">
              edit
              </span>
          </button>
        </div>
      </div>
<!--  -->
    </div>




  </div>
</div>

  </div>
  <script src="index.js"></script>
  <!-- <script>
              let tasks = [
                {
                  "title": "قراءة كتاب",
                  "date":"15/2/2023",
                  "isDone":true
                },{
                  "title": "إنهاء المشروع",
                  "date":"15/12/2028",
                  "isDone":true
                },{
                  "title": "إنهاء الدرس",
                  "date":"15/11/2027",
                  "isDone":true
                },{
                  "title": "حل التحدي",
                  "date":"15/12/2025",
                  "isDone":true
                }
              ]

      function getTaskFromStorage(){

        let retrievedTasks = JSON.parse(localStorage.getItem("tasks"));
        tasks = retrievedTasks ?? []


      }
      getTaskFromStorage()

      function fillTasksOnThePage(){
        document.getElementById("tasks").innerHTML="";
        let index = 0;
        for (task of tasks){
          let content = 
          `<div id="task" class="task ${task.isDone ? 'done':''}">

          <div style="width: 60%;">
          <h3>${task.title}</h3>
          
      <div>
        <span class="material-symbols-outlined calendar">
          calendar_month
          </span>
          <span>
          ${task.date}
          </span>

        </div>
        </div>

      <div style="display: flex; justify-content:space-between; align-items: center;width: 30%; color: #fff;">
        <button onclick="deleteTask(${index})" class="circular" style="background-color: red;">
          <span class="material-symbols-outlined">
            delete
            </span>
        </button>
        ${task.isDone ?`
        <button onclick="toggleTaskCompletion(${index})" class="circular" style="background-color: green;">
                <span class="material-symbols-outlined">
                  remove_done
                </span>
        </button>
        `:`
        <button onclick="toggleTaskCompletion(${index})" class="circular" style="background-color: green;">
          <span class="material-symbols-outlined">
            done
            </span>
        </button>
        
        `}
        
        <button onclick="editTask(${index})" class="circular" style="background-color: blue;">
          <span class="material-symbols-outlined">
            edit
            </span>
        </button>
      </div>
    </div>
          
          `
      
      document.getElementById("tasks").innerHTML +=content;
      index++
        }
      }
      fillTasksOnThePage();
      document.getElementById("add-btn").addEventListener("click", function(){
        let now = new Date(),
        date = now.getDay() + "/" + (now.getMonth()+1) + "/" + now.getFullYear() + " <span class='material-symbols-outlined calendar'>schedule</span> " + now.getHours() + " : " + now.getMinutes(),
        taskName = prompt("الرجاء إدخال عنوان المهمة");
      let  taskObj = {
                  "title": taskName,
                  "date":date,
                  "isDone":false
        }
        tasks.push(taskObj);
        storeTasks();
        
      fillTasksOnThePage();
      });

      function deleteTask(index){
        let task = tasks[index];
        let isConfirmed = confirm("هل أنت متأكد من احذف :"+task.title);
        if(isConfirmed){
          tasks.splice(index,1);
          storeTasks();
          fillTasksOnThePage();

        }
      }

      function editTask(index){
        let task = tasks[index];
        let newTaskTitle =  prompt("الرجاء إدخال عنوان المهمة الجديد",task.title);

        task.title = newTaskTitle;
        storeTasks();
        fillTasksOnThePage();
      }



      function toggleTaskCompletion(index){
        let task = tasks[index];

        task.isDone = !task.isDone;
        
        storeTasks();
        fillTasksOnThePage();
      }



      function storeTasks(){

        let tasksString =JSON.stringify(tasks);
        localStorage.setItem("tasks",tasksString);
      }





  </script> -->
</body>
</html>